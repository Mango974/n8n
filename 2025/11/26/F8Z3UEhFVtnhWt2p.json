{"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"id_request"},{"name":"request"},{"name":"type"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[656,816],"id":"0025f2c5-6b07-4827-87b3-629505a96d15","name":"When Executed by Another Workflow"},{"parameters":{"operation":"create","base":{"__rl":true,"value":"apprrk8BzFraLVbsx","mode":"list","cachedResultName":"Marketing Team","cachedResultUrl":"https://airtable.com/apprrk8BzFraLVbsx"},"table":{"__rl":true,"value":"tbl4mN27ieDO845l2","mode":"list","cachedResultName":"Table 1","cachedResultUrl":"https://airtable.com/apprrk8BzFraLVbsx/tbl4mN27ieDO845l2"},"columns":{"mappingMode":"defineBelow","value":{"Type":"={{ $json.type }}","Status":"En cours","Requette":"={{ $json.request }}","ID Requette":"={{ $json.id_request }}"},"matchingColumns":[],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"Titre","displayName":"Titre","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Type","displayName":"Type","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"raw_image","value":"raw_image"},{"name":"raw_audio","value":"raw_audio"},{"name":"raw_video","value":"raw_video"},{"name":"Vid√©o","value":"Vid√©o"},{"name":"","value":""}],"readOnly":false,"removed":false},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Erreur","value":"Erreur"},{"name":"En cours","value":"En cours"},{"name":"Termin√©","value":"Termin√©"}],"readOnly":false,"removed":false},{"id":"Requette","displayName":"Requette","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"ID Requette","displayName":"ID Requette","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Lien","displayName":"Lien","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[880,816],"id":"faf8704d-b4f8-4fe7-ab73-1284c9265a76","name":"Cr√©er un Enregistrement Airtable"},{"parameters":{"url":"=https://api.wavespeed.ai/api/v3/predictions/{{ $('When Executed by Another Workflow').item.json.id_request }}/result","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1328,736],"id":"9823e200-687f-4ebd-b9c4-5916ad934f01","name":"Envoyer Requ√™te HTTP","onError":"continueErrorOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"8d60bbc3-5845-415b-a789-bf76bad38a2a","leftValue":"={{ $json.data.status }}","rightValue":"completed","operator":{"type":"string","operation":"notEquals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1552,912],"id":"6085a8ad-afaa-465d-af60-3c9ca6eb5657","name":"V√©rifier Statut de la Requ√™te","alwaysOutputData":false},{"parameters":{"operation":"update","base":{"__rl":true,"value":"apprrk8BzFraLVbsx","mode":"list","cachedResultName":"Marketing Team","cachedResultUrl":"https://airtable.com/apprrk8BzFraLVbsx"},"table":{"__rl":true,"value":"tbl4mN27ieDO845l2","mode":"list","cachedResultName":"DashBoard","cachedResultUrl":"https://airtable.com/apprrk8BzFraLVbsx/tbl4mN27ieDO845l2"},"columns":{"mappingMode":"defineBelow","value":{"Status":"Erreur","id":"={{ $json.id }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":true,"removed":true},{"id":"Titre","displayName":"Titre","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Type","displayName":"Type","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"raw_image","value":"raw_image"},{"name":"raw_audio","value":"raw_audio"},{"name":"raw_video","value":"raw_video"},{"name":"Vid√©o","value":"Vid√©o"},{"name":"","value":""}],"readOnly":false,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Erreur","value":"Erreur"},{"name":"En cours","value":"En cours"},{"name":"Termin√©","value":"Termin√©"}],"readOnly":false,"removed":false},{"id":"Requette","displayName":"Requette","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"ID Requette","displayName":"ID Requette","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Lien","displayName":"Lien","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[1552,688],"id":"cc031041-12e6-4cb5-a731-c28dab82f517","name":"Mettre √† Jour Statut Erreur Airtable"},{"parameters":{"operation":"update","base":{"__rl":true,"value":"apprrk8BzFraLVbsx","mode":"list","cachedResultName":"Marketing Team","cachedResultUrl":"https://airtable.com/apprrk8BzFraLVbsx"},"table":{"__rl":true,"value":"tbl4mN27ieDO845l2","mode":"list","cachedResultName":"DashBoard","cachedResultUrl":"https://airtable.com/apprrk8BzFraLVbsx/tbl4mN27ieDO845l2"},"columns":{"mappingMode":"defineBelow","value":{"Status":"Termin√©","id":"={{ $('Cr√©er un Enregistrement Airtable').item.json.id }}","Lien":"={{ $('Envoyer Requ√™te HTTP').item.json.data.outputs[0] }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":true,"removed":true},{"id":"Titre","displayName":"Titre","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Type","displayName":"Type","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"raw_image","value":"raw_image"},{"name":"raw_audio","value":"raw_audio"},{"name":"raw_video","value":"raw_video"},{"name":"Vid√©o","value":"Vid√©o"},{"name":"","value":""}],"readOnly":false,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Erreur","value":"Erreur"},{"name":"En cours","value":"En cours"},{"name":"Termin√©","value":"Termin√©"}],"readOnly":false,"removed":false},{"id":"Requette","displayName":"Requette","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"ID Requette","displayName":"ID Requette","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Lien","displayName":"Lien","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[1952,912],"id":"e4998596-c44d-4506-a755-b63cc627642d","name":"Mettre √† Jour Statut Termin√© Airtable"},{"parameters":{"content":"# üß≠ Vue d'ensemble du Workflow\n\n## üìã Objectif\nCe workflow automatis√© dans n8n est con√ßu pour g√©rer et suivre les requ√™tes de traitement de donn√©es via Airtable et un service externe. Il commence par la cr√©ation d'un enregistrement dans Airtable, effectue des requ√™tes HTTP pour obtenir des pr√©dictions, et met √† jour le statut des requ√™tes en fonction des r√©sultats obtenus.\n\n## üîÑ Sections du Processus\n\n### üéØ Section D√©clenchement et Entr√©e\nLe workflow est d√©clench√© par un ensemble de param√®tres d'entr√©e qui incluent l'identifiant de la requ√™te, la requ√™te elle-m√™me, et le type de donn√©es √† traiter. Ces informations sont utilis√©es pour cr√©er un nouvel enregistrement dans Airtable, marquant le d√©but du processus de suivi.\n\n### ‚è≥ Section Attente et Requ√™te HTTP\nApr√®s la cr√©ation de l'enregistrement, le workflow inclut une √©tape d'attente de 2 secondes pour assurer la synchronisation. Ensuite, une requ√™te HTTP est envoy√©e √† un service externe pour obtenir des pr√©dictions bas√©es sur les donn√©es fournies. Cette √©tape est cruciale pour le traitement des donn√©es et l'obtention des r√©sultats n√©cessaires.\n\n### üîç Section D√©cision et Routage\nUne fois la r√©ponse de la requ√™te HTTP re√ßue, le workflow √©value le statut de la requ√™te. Si le statut n'est pas \"compl√©t√©\", le workflow prend une d√©cision pour g√©rer les cas d'erreur ou de traitement en cours. Cette section assure que seules les requ√™tes r√©ussies passent √† l'√©tape suivante.\n\n### ‚ö° Section Mise √† Jour et Sortie\nEn fonction du r√©sultat de la d√©cision pr√©c√©dente, le workflow met √† jour le statut de l'enregistrement dans Airtable. Si la requ√™te est compl√©t√©e avec succ√®s, le statut est mis √† jour en \"Termin√©\" et un lien vers le r√©sultat est ajout√©. En cas d'erreur, le statut est mis √† jour en \"Erreur\", permettant un suivi efficace des probl√®mes.\n\n## üîó Liens Utiles\n- [Airtable](https://airtable.com)\n- [Wavespeed](https://wavespeed.ai/?utm_source=Thomas_Berton)","height":868,"width":800,"color":6},"type":"n8n-nodes-base.stickyNote","position":[-320,432],"typeVersion":1,"id":"582a3b88-a297-41de-8aae-c788a86723e7","name":"Workflow Overview"},{"parameters":{"content":"---\n\n## üë®‚Äçüíª Workflow cr√©√© par Thomas Berton\n\n**Envie de faire d√©velopper vos solutions IA par des pros ?**  \nContactez mon agence Azuro üëâ [azuro-ai.com](https://azuro-ai.com/contact)\n\nüì¢ **Rejoignez notre communaut√© IA sur Skool** üëâ [Le Club IA](https://www.skool.com/le-club-ia)\n\n### üîó Suivez-moi sur les r√©seaux\n\nüé• **YouTube** : [Thomas BSSH](https://www.youtube.com/@thomasbssh?sub_confirmation=1)  \nüíº **LinkedIn** : [Thomas Berton](https://linkedin.com/in/thomas-berton-563894196)  \nüì± **Instagram** : [@thomasbssh](https://instagram.com/thomasbssh)\n\n---","height":400,"width":800,"color":6},"type":"n8n-nodes-base.stickyNote","position":[-320,-80],"typeVersion":1,"id":"7a4c6dbf-ce0f-48c0-b21e-13bcaf5153ed","name":"Signature"},{"parameters":{"amount":20},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1104,816],"id":"79ca7163-a45e-4044-9282-7ce112395871","name":"Attendre 20 Secondes","webhookId":"a7bf329e-b1ca-4f59-b954-d57e551210f6"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Cr√©er un Enregistrement Airtable","type":"main","index":0}]]},"Cr√©er un Enregistrement Airtable":{"main":[[{"node":"Attendre 20 Secondes","type":"main","index":0}]]},"Envoyer Requ√™te HTTP":{"main":[[{"node":"V√©rifier Statut de la Requ√™te","type":"main","index":0}],[{"node":"Mettre √† Jour Statut Erreur Airtable","type":"main","index":0}]]},"V√©rifier Statut de la Requ√™te":{"main":[[{"node":"Attendre 20 Secondes","type":"main","index":0}],[{"node":"Mettre √† Jour Statut Termin√© Airtable","type":"main","index":0}]]},"Attendre 20 Secondes":{"main":[[{"node":"Envoyer Requ√™te HTTP","type":"main","index":0}]]}},"pinData":{"When Executed by Another Workflow":[{"json":{"id_request":"7d500c2bdf72404aae5b4f2d751019d8","request":"https://api.wavespeed.ai/api/v3/predictions/7d500c2bdf72404aae5b4f2d751019d8/result","type":"raw_video"}}]},"meta":null}