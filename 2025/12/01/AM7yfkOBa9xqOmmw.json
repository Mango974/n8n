{"nodes":[{"parameters":{},"id":"d2ae96ab-baee-42a5-9474-430e1b785025","name":"D√©marrer la Cr√©ation Vid√©o","type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-1744,176]},{"parameters":{"content":"## üé¨ Workflow de Cr√©ation de Vid√©os YouTube Longues\n\n**Objectif:** Cr√©er automatiquement des vid√©os YouTube de 8-30+ minutes\n\n**Services utilis√©s:**\n- Apify: Scraping des transcripts et miniatures YouTube\n- Kie.ai: G√©n√©ration d'images et vid√©os IA\n- Google Sheets: Stockage des donn√©es\n- Google Drive: Stockage des fichiers\n- MCP/ffmpeg: Montage vid√©o\n- OpenAI: G√©n√©ration de scripts avec few-shot prompting\n\n**Dur√©e estim√©e:** 15-30 minutes par vid√©o","height":400,"width":400,"color":4},"id":"ddf089d7-7226-4617-8c89-ed840079d65b","name":"üìã Introduction au Workflow","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1952,-32]},{"parameters":{"assignments":{"assignments":[{"id":"url-youtube","name":"urlYoutube","type":"string","value":"https://www.youtube.com/watch?v=EXAMPLE"},{"id":"topic","name":"videoTopic","type":"string","value":"Intelligence artificielle et automatisation"},{"id":"duration","name":"targetDuration","type":"number","value":600},{"id":"tone","name":"videoTone","type":"string","value":"√©ducatif et engageant"},{"id":"language","name":"language","type":"string","value":"fran√ßais"}]},"options":{}},"id":"ca482a0e-b703-4d79-b5d1-519e85e8077f","name":"Configuration Initiale","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1552,176]},{"parameters":{"content":"## Scraping avec Apify\n\nUtilisation d'Apify pour extraire:\n- Transcripts des vid√©os YouTube\n- Miniatures et m√©tadonn√©es\n- Donn√©es pour l'analyse de contenu\n\nAPI: YouTube Video Scraper","height":200,"width":350,"color":5},"id":"9897a048-b65a-4ecc-b4a9-6696b0f6d67c","name":"üì• √âtape 1: Scraping Apify","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1568,-48]},{"parameters":{"method":"POST","url":"https://api.apify.com/v2/acts/YOUR_ACTOR_ID/runs","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"startUrls","value":"={{ [{ url: $json.urlYoutube }] }}"},{"name":"maxResults","value":"5"},{"name":"getTranscript","value":"true"},{"name":"getThumbnails","value":"true"}]},"options":{}},"id":"3d622eb0-0859-40d5-99e2-261319cd2144","name":"Apify - Scraper YouTube","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1312,176]},{"parameters":{"amount":30},"id":"b02c197d-f0f9-46a0-b375-9bed7d90c5fe","name":"Attendre Fin du Scraping","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1072,176],"webhookId":"ed9ca2ee-1486-452d-82af-ca642e381337"},{"parameters":{"url":"={{ $node['Apify - Scraper YouTube'].json.data.defaultDatasetId ? 'https://api.apify.com/v2/datasets/' + $node['Apify - Scraper YouTube'].json.data.defaultDatasetId + '/items' : '' }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"id":"d7e7c36c-668e-4927-ae54-f79a135f8dc8","name":"R√©cup√©rer R√©sultats Apify","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-832,176]},{"parameters":{"jsCode":"// Traiter et nettoyer les transcripts r√©cup√©r√©s\nconst items = $input.all();\nconst processedData = [];\n\nfor (const item of items) {\n  const data = item.json;\n  \n  if (data.transcript) {\n    // Nettoyer et structurer le transcript\n    const cleanTranscript = data.transcript\n      .replace(/\\[.*?\\]/g, '') // Enlever timestamps\n      .replace(/\\s+/g, ' ') // Normaliser espaces\n      .trim();\n    \n    processedData.push({\n      json: {\n        videoId: data.videoId || '',\n        title: data.title || '',\n        transcript: cleanTranscript,\n        thumbnailUrl: data.thumbnails?.[0]?.url || '',\n        duration: data.duration || 0,\n        viewCount: data.viewCount || 0,\n        publishedAt: data.publishedAt || ''\n      }\n    });\n  }\n}\n\nreturn processedData;"},"id":"0dc1ba49-c2f3-4e48-95b7-d4c57669258e","name":"Traiter les Transcripts","type":"n8n-nodes-base.code","typeVersion":2,"position":[-592,176]},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"YOUR_SPREADSHEET_ID"},"sheetName":{"__rl":true,"mode":"list","value":"Transcripts"},"columns":{"mappingMode":"defineBelow","value":{"videoId":"={{ $json.videoId }}","title":"={{ $json.title }}","transcript":"={{ $json.transcript }}","thumbnailUrl":"={{ $json.thumbnailUrl }}","duration":"={{ $json.duration }}","timestamp":"={{ $now }}"}},"options":{}},"id":"155ebc48-a81c-4ea9-9165-944762116488","name":"Google Sheets - Sauvegarder Transcripts","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-352,176]},{"parameters":{"content":"## G√©n√©ration de Script avec Few-Shot Prompting\n\nUtilisation d'OpenAI GPT-4 avec:\n- Exemples de scripts existants\n- Instructions sur le ton et la structure\n- Expressions r√©currentes d√©finies\n- Contr√¥le du rythme narratif\n\nTemp√©rature: 0.7 pour cr√©ativit√©","height":240,"width":380,"color":6},"id":"256b8dfa-96f7-4379-bb51-397454b353db","name":"‚úçÔ∏è √âtape 2: G√©n√©ration du Script","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-368,-112]},{"parameters":{"jsCode":"// Cr√©er des exemples de scripts pour few-shot learning\nconst fewShotExamples = [\n  {\n    input: \"Cr√©er une introduction sur l'IA\",\n    output: \"Bonjour √† tous et bienvenue dans cette nouvelle vid√©o ! Aujourd'hui, nous allons plonger dans le monde fascinant de l'intelligence artificielle. Vous √™tes-vous d√©j√† demand√© comment les machines peuvent apprendre et prendre des d√©cisions ? Restez avec moi, car nous allons d√©couvrir ensemble les secrets de cette technologie r√©volutionnaire.\"\n  },\n  {\n    input: \"Expliquer un concept technique\",\n    output: \"Maintenant, parlons du machine learning. Imaginez que vous enseignez √† un enfant √† reconna√Ætre des fruits. Vous lui montrez des pommes, des oranges, des bananes. Avec le temps, l'enfant apprend √† les distinguer. C'est exactement ce que fait le machine learning : il apprend √† partir d'exemples pour faire des pr√©dictions.\"\n  },\n  {\n    input: \"Conclure une section\",\n    output: \"Voil√†, nous venons de voir les bases essentielles. Mais ce n'est que le d√©but ! Dans la prochaine partie, nous allons approfondir ce concept et voir des applications concr√®tes qui vont vous surprendre.\"\n  }\n];\n\nconst transcript = $json.transcript || '';\nconst topic = $('Configuration Initiale').first().json.videoTopic;\nconst tone = $('Configuration Initiale').first().json.videoTone;\nconst duration = $('Configuration Initiale').first().json.targetDuration;\n\nreturn [{\n  json: {\n    fewShotExamples: fewShotExamples,\n    sourceTranscript: transcript,\n    topic: topic,\n    tone: tone,\n    targetDuration: duration,\n    language: 'fran√ßais'\n  }\n}];"},"id":"c48b646e-4ede-41e3-a2f1-c54b358addd9","name":"Pr√©parer Examples Few-Shot","type":"n8n-nodes-base.code","typeVersion":2,"position":[-112,176]},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-4\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Tu es un expert en cr√©ation de titres YouTube optimis√©s pour le SEO. Tu dois cr√©er des titres accrocheurs, clairs, avec des mots-cl√©s pertinents, et qui incitent au clic tout en restant honn√™tes.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"G√©n√®re 10 titres YouTube optimis√©s SEO pour une vid√©o sur le sujet : {{ $json.topic }}. La vid√©o dure {{ $json.targetDuration }} secondes et a un ton {{ $json.tone }}. Retourne uniquement un JSON avec la structure: {\\\"titles\\\": [\\\"titre1\\\", \\\"titre2\\\", ...]}. Ne retourne RIEN d'autre que le JSON valide.\"\n    }\n  ],\n  \"temperature\": 0.8,\n  \"max_tokens\": 500\n}","options":{}},"id":"150e474c-a2e4-4563-8462-0d6b87cecfa0","name":"OpenAI - G√©n√©rer 10 Titres SEO","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[144,80]},{"parameters":{"jsCode":"const response = $json.choices[0].message.content;\nlet titlesData;\n\ntry {\n  // Nettoyer le JSON si n√©cessaire\n  const cleanJson = response.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n  titlesData = JSON.parse(cleanJson);\n} catch (error) {\n  titlesData = { titles: ['Erreur lors du parsing des titres'] };\n}\n\nreturn [{\n  json: {\n    titles: titlesData.titles,\n    selectedTitle: titlesData.titles[0] // S√©lectionner le premier par d√©faut\n  }\n}];"},"id":"b21bde48-7b98-4475-8f86-4b9f8755f1ea","name":"Parser les Titres","type":"n8n-nodes-base.code","typeVersion":2,"position":[384,80]},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-4\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Tu es un expert en storytelling et cr√©ation de scripts YouTube. Tu cr√©es des plans de script structur√©s, engageants, avec un rythme narratif captivant.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Cr√©e un plan d√©taill√© pour une vid√©o YouTube de {{ $('Configuration Initiale').first().json.targetDuration }} secondes sur le sujet : {{ $('Pr√©parer Examples Few-Shot').first().json.topic }}.\\n\\nLe plan doit inclure:\\n1. Introduction accrocheuse (10% du temps)\\n2. Contexte et probl√©matique (15%)\\n3. Contenu principal divis√© en 3-4 sections (60%)\\n4. Conclusion et call-to-action (15%)\\n\\nTon: {{ $('Configuration Initiale').first().json.videoTone }}\\n\\nUtilise le transcript suivant comme inspiration:\\n{{ $('Pr√©parer Examples Few-Shot').first().json.sourceTranscript.slice(0, 1000) }}...\\n\\nRetourne un JSON avec: {\\\"outline\\\": [{\\\"section\\\": \\\"nom\\\", \\\"duration\\\": secondes, \\\"keyPoints\\\": [\\\"point1\\\", \\\"point2\\\"]}]}\"\n    }\n  ],\n  \"temperature\": 0.7,\n  \"max_tokens\": 1500\n}","options":{}},"id":"6d3ae793-7fcb-4ade-a551-5208e99b1e8b","name":"OpenAI - Cr√©er Plan du Script","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[144,272]},{"parameters":{"jsCode":"const response = $json.choices[0].message.content;\nlet outlineData;\n\ntry {\n  const cleanJson = response.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n  outlineData = JSON.parse(cleanJson);\n} catch (error) {\n  outlineData = { \n    outline: [\n      { section: 'Introduction', duration: 60, keyPoints: ['Hook', 'Pr√©sentation'] },\n      { section: 'D√©veloppement', duration: 300, keyPoints: ['Point 1', 'Point 2'] },\n      { section: 'Conclusion', duration: 60, keyPoints: ['R√©sum√©', 'CTA'] }\n    ] \n  };\n}\n\nreturn [{\n  json: {\n    outline: outlineData.outline,\n    totalSections: outlineData.outline.length\n  }\n}];"},"id":"2454519d-2bc0-4d3e-a11c-d85e143b7dbf","name":"Parser le Plan","type":"n8n-nodes-base.code","typeVersion":2,"position":[384,272]},{"parameters":{"url":"=https://serpapi.com/search?q={{ encodeURIComponent($('Configuration Initiale').first().json.videoTopic) }}&api_key=YOUR_SERPAPI_KEY&num=5","options":{}},"id":"5392273c-a69c-4e0b-8c7f-b086e5b97a73","name":"Recherche Web pour Enrichir","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[624,176]},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-4\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Tu es un sc√©nariste YouTube expert. Tu √©cris des scripts captivants, bien rythm√©s, avec des transitions fluides et un ton {{ $('Configuration Initiale').first().json.videoTone }}.\\n\\nEXPRESSIONS R√âCURRENTES √Ä UTILISER:\\n- 'Bonjour √† tous et bienvenue'\\n- 'Restez avec moi car...'\\n- 'Vous vous demandez s√ªrement...'\\n- 'Mais attendez, ce n'est pas tout !'\\n- 'Passons maintenant √†...'\\n- 'N'oubliez pas de vous abonner'\\n\\nSTRUCTURE:\\n- Phrases courtes et dynamiques\\n- Questions rh√©toriques pour engagement\\n- Analogies et exemples concrets\\n- Transitions marqu√©es entre sections\\n- Call-to-action naturels\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Voici des exemples de scripts de qualit√© :\\n\\n{{ $('Pr√©parer Examples Few-Shot').first().json.fewShotExamples.map((ex, i) => `Exemple ${i+1}:\\nInput: ${ex.input}\\nOutput: ${ex.output}`).join('\\n\\n') }}\\n\\n---\\n\\nMaintenant, cr√©e un script COMPLET pour une vid√©o de {{ $('Configuration Initiale').first().json.targetDuration }} secondes.\\n\\nSujet: {{ $('Configuration Initiale').first().json.videoTopic }}\\nTitre: {{ $('Parser les Titres').first().json.selectedTitle }}\\n\\nPlan √† suivre:\\n{{ $('Parser le Plan').first().json.outline.map((section, i) => `${i+1}. ${section.section} (${section.duration}s):\\n   - ${section.keyPoints.join('\\n   - ')}`).join('\\n\\n') }}\\n\\nInformations additionnelles de recherche:\\n{{ $('Recherche Web pour Enrichir').first().json.organic_results ? $('Recherche Web pour Enrichir').first().json.organic_results.slice(0, 3).map(r => r.snippet).join('\\n') : 'Aucune' }}\\n\\nRetourne le script au format JSON: {\\\"script\\\": {\\\"introduction\\\": \\\"...\\\", \\\"sections\\\": [{\\\"title\\\": \\\"...\\\", \\\"content\\\": \\\"...\\\", \\\"duration\\\": seconds}], \\\"conclusion\\\": \\\"...\\\"}}\"\n    }\n  ],\n  \"temperature\": 0.7,\n  \"max_tokens\": 4000\n}","options":{}},"id":"53977ae6-5f7b-4615-92f3-767a769215dd","name":"OpenAI - G√©n√©rer Script Complet (Few-Shot)","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[864,176]},{"parameters":{"jsCode":"const response = $json.choices[0].message.content;\nlet scriptData;\n\ntry {\n  const cleanJson = response.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n  scriptData = JSON.parse(cleanJson);\n} catch (error) {\n  return [{\n    json: {\n      error: 'Erreur parsing script',\n      rawResponse: response\n    }\n  }];\n}\n\n// Calculer la dur√©e totale\nconst totalDuration = scriptData.script.sections.reduce((sum, section) => sum + (section.duration || 0), 0);\n\n// Cr√©er le script complet en texte\nconst fullScriptText = `${scriptData.script.introduction}\\n\\n${scriptData.script.sections.map(s => s.content).join('\\n\\n')}\\n\\n${scriptData.script.conclusion}`;\n\nreturn [{\n  json: {\n    script: scriptData.script,\n    fullScriptText: fullScriptText,\n    totalDuration: totalDuration,\n    wordCount: fullScriptText.split(' ').length,\n    title: $('Parser les Titres').first().json.selectedTitle,\n    timestamp: new Date().toISOString()\n  }\n}];"},"id":"fd5a5781-547b-4d8d-94fc-5da2423ca44f","name":"Parser le Script Complet","type":"n8n-nodes-base.code","typeVersion":2,"position":[1104,176]},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"YOUR_SPREADSHEET_ID"},"sheetName":{"__rl":true,"mode":"list","value":"Scripts"},"columns":{"mappingMode":"defineBelow","value":{"title":"={{ $json.title }}","fullScript":"={{ $json.fullScriptText }}","duration":"={{ $json.totalDuration }}","wordCount":"={{ $json.wordCount }}","timestamp":"={{ $json.timestamp }}"}},"options":{}},"id":"f01dab41-ab61-42f9-9382-956eecb1759a","name":"Google Sheets - Sauvegarder Script","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[1344,176]},{"parameters":{"content":"## D√©coupage du Script\n\nDivision du script en s√©quences de 5-10 secondes pour:\n- G√©n√©ration d'images correspondantes\n- Synchronisation avec le texte\n- Cr√©ation de prompts image/vid√©o\n- Optimisation du montage","height":220,"width":350,"color":3},"id":"51740d51-5465-4ae5-ad00-73aa9306e8c5","name":"üé¨ √âtape 3: D√©coupage en S√©quences","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1312,-112]},{"parameters":{"jsCode":"// D√©couper le script en s√©quences de 5-10 secondes\nconst script = $json.script;\nconst sequences = [];\nlet sequenceId = 1;\n\n// Fonction pour cr√©er des s√©quences\nfunction createSequences(content, sectionTitle, targetDuration = 8) {\n  // D√©couper par phrases\n  const sentences = content.match(/[^.!?]+[.!?]+/g) || [content];\n  let currentSequence = '';\n  let currentDuration = 0;\n  \n  sentences.forEach((sentence, index) => {\n    const sentenceDuration = Math.ceil(sentence.split(' ').length / 2); // ~2 mots par seconde\n    \n    if (currentDuration + sentenceDuration > targetDuration && currentSequence) {\n      sequences.push({\n        id: sequenceId++,\n        section: sectionTitle,\n        text: currentSequence.trim(),\n        duration: currentDuration,\n        type: 'text'\n      });\n      currentSequence = sentence;\n      currentDuration = sentenceDuration;\n    } else {\n      currentSequence += ' ' + sentence;\n      currentDuration += sentenceDuration;\n    }\n    \n    // Derni√®re phrase\n    if (index === sentences.length - 1 && currentSequence) {\n      sequences.push({\n        id: sequenceId++,\n        section: sectionTitle,\n        text: currentSequence.trim(),\n        duration: currentDuration,\n        type: 'text'\n      });\n    }\n  });\n}\n\n// Introduction\nif (script.introduction) {\n  createSequences(script.introduction, 'Introduction', 10);\n}\n\n// Sections principales\nif (script.sections) {\n  script.sections.forEach(section => {\n    createSequences(section.content, section.title, 8);\n  });\n}\n\n// Conclusion\nif (script.conclusion) {\n  createSequences(script.conclusion, 'Conclusion', 10);\n}\n\nreturn sequences.map(seq => ({ json: seq }));"},"id":"084ec3fc-e102-4dc2-8d1f-40401063a187","name":"D√©couper Script en S√©quences","type":"n8n-nodes-base.code","typeVersion":2,"position":[1584,176]},{"parameters":{"content":"## G√©n√©ration Visuelle avec Kie.ai\n\nPour chaque s√©quence:\n1. Cr√©er prompt image optimis√©\n2. G√©n√©rer image via Kie.ai\n3. Option: G√©n√©rer vid√©o courte\n4. T√©l√©charger et stocker\n\nStyle: Coh√©rent et professionnel","height":220,"width":350,"color":7},"id":"52d7e191-4fb4-4fee-9b17-cbd1f3e7b007","name":"üé® √âtape 4: G√©n√©ration Images/Vid√©os","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1552,-112]},{"parameters":{"options":{}},"id":"cc57a961-b9fc-4059-9d27-0a7b6b433b26","name":"Boucle sur les S√©quences","type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[1824,176]},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-4\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Tu es un expert en cr√©ation de prompts pour g√©n√©ration d'images IA. Tu cr√©es des prompts d√©taill√©s, visuellement descriptifs, avec un style coh√©rent.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Cr√©e un prompt DALL-E/Stable Diffusion pour illustrer ce texte de vid√©o YouTube :\\n\\n{{ $json.text }}\\n\\nSection: {{ $json.section }}\\n\\nStyle requis: Illustration moderne, professionnelle, couleurs vibrantes, 16:9, haute qualit√©.\\n\\nRetourne UNIQUEMENT le prompt, sans autre texte.\"\n    }\n  ],\n  \"temperature\": 0.8,\n  \"max_tokens\": 200\n}","options":{}},"id":"cca4ddfa-7f2f-42b7-9dca-c78d090d7d05","name":"Cr√©er Prompt Image pour S√©quence","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2064,176]},{"parameters":{"method":"POST","url":"https://api.kie.ai/v1/images/generate","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"prompt\": \"{{ $('Cr√©er Prompt Image pour S√©quence').first().json.choices[0].message.content }}\",\n  \"model\": \"flux-pro\",\n  \"width\": 1920,\n  \"height\": 1080,\n  \"num_outputs\": 1,\n  \"output_format\": \"png\",\n  \"guidance_scale\": 7.5\n}","options":{"response":{"response":{"responseFormat":"file"}}}},"id":"21796469-5383-45be-9d53-7704a7cf3235","name":"Kie.ai - G√©n√©rer Image","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2304,176]},{"parameters":{"name":"={{ 'sequence_' + $('Boucle sur les S√©quences').item.json.id + '_image.png' }}","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"mode":"list","value":"root","cachedResultName":"/ (Root folder)"},"options":{}},"id":"b484bf12-6c18-48e0-8106-0c2344162c40","name":"Google Drive - Uploader Image","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[2544,176]},{"parameters":{"conditions":{"options":{"version":2},"combinator":"and","conditions":[{"id":"video-needed","leftValue":"={{ $('Boucle sur les S√©quences').item.json.duration }}","rightValue":"6","operator":{"type":"number","operation":"gt"}}]},"options":{}},"id":"48b13854-38af-48a8-b15b-dd295082f9ff","name":"G√©n√©rer Vid√©o Courte?","type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2784,176]},{"parameters":{"jsCode":"// Cr√©er un prompt pour g√©n√©rer une courte vid√©o\nconst imagePrompt = $('Cr√©er Prompt Image pour S√©quence').first().json.choices[0].message.content;\nconst duration = $('Boucle sur les S√©quences').item.json.duration;\n\nconst videoPrompt = `${imagePrompt}, smooth camera movement, subtle animation, professional cinematography, ${duration} seconds`;\n\nreturn [{\n  json: {\n    videoPrompt: videoPrompt,\n    duration: duration,\n    sequenceId: $('Boucle sur les S√©quences').item.json.id\n  }\n}];"},"id":"3733deae-8be2-4a02-8da3-e9f5b384b0ab","name":"Cr√©er Prompt Vid√©o","type":"n8n-nodes-base.code","typeVersion":2,"position":[3024,80]},{"parameters":{"method":"POST","url":"https://api.kie.ai/v1/videos/generate","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"prompt\": \"{{ $json.videoPrompt }}\",\n  \"model\": \"runway-gen3\",\n  \"duration\": {{ $json.duration }},\n  \"aspect_ratio\": \"16:9\",\n  \"output_format\": \"mp4\"\n}","options":{"response":{"response":{"responseFormat":"file"}}}},"id":"c3e5315f-75d2-4361-b5b3-dbcc70573353","name":"Kie.ai - G√©n√©rer Vid√©o","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[3264,80]},{"parameters":{"name":"={{ 'sequence_' + $('Cr√©er Prompt Vid√©o').first().json.sequenceId + '_video.mp4' }}","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"mode":"list","value":"root","cachedResultName":"/ (Root folder)"},"options":{}},"id":"acf6d668-0aed-4b26-b4df-688d50c79974","name":"Google Drive - Uploader Vid√©o","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[3504,80]},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"id":"1f9e6baf-dc77-403a-91ce-085b97ab66ec","name":"Fusionner Assets","type":"n8n-nodes-base.merge","typeVersion":3,"position":[3744,176]},{"parameters":{"jsCode":"// Enregistrer les informations de l'asset g√©n√©r√©\nconst sequenceData = $('Boucle sur les S√©quences').item.json;\nconst imageFile = $('Google Drive - Uploader Image').first().json;\nconst videoFile = $('Google Drive - Uploader Vid√©o').first()?.json;\n\nreturn [{\n  json: {\n    sequenceId: sequenceData.id,\n    section: sequenceData.section,\n    text: sequenceData.text,\n    duration: sequenceData.duration,\n    imageUrl: imageFile?.webViewLink || '',\n    imageId: imageFile?.id || '',\n    videoUrl: videoFile?.webViewLink || '',\n    videoId: videoFile?.id || '',\n    hasVideo: !!videoFile\n  }\n}];"},"id":"38e97e99-64df-41a7-8b3e-101d18114074","name":"Enregistrer Info Asset","type":"n8n-nodes-base.code","typeVersion":2,"position":[3984,176]},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"YOUR_SPREADSHEET_ID"},"sheetName":{"__rl":true,"mode":"list","value":"Assets"},"columns":{"mappingMode":"defineBelow","value":{"sequenceId":"={{ $json.sequenceId }}","section":"={{ $json.section }}","text":"={{ $json.text }}","duration":"={{ $json.duration }}","imageId":"={{ $json.imageId }}","videoId":"={{ $json.videoId }}","hasVideo":"={{ $json.hasVideo }}"}},"options":{}},"id":"dd1da529-9b59-47d9-b4a5-c8d0aa44e2ef","name":"Google Sheets - Sauvegarder Assets","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[4224,176]},{"parameters":{"content":"## G√©n√©ration Audio\n\n1. Voix IA pour narration\n2. Musique de fond\n3. Effets sonores\n4. Mixage audio\n\nServices: ElevenLabs, Mubert","height":200,"width":300,"color":2},"id":"e8afdd93-a64d-452c-8550-656d2c7c3401","name":"üéµ √âtape 5: G√©n√©ration Audio","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[4192,-112]},{"parameters":{"method":"POST","url":"https://api.elevenlabs.io/v1/text-to-speech/VOICE_ID","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"text\": \"{{ $('Parser le Script Complet').first().json.fullScriptText }}\",\n  \"model_id\": \"eleven_multilingual_v2\",\n  \"voice_settings\": {\n    \"stability\": 0.5,\n    \"similarity_boost\": 0.75,\n    \"style\": 0.5,\n    \"use_speaker_boost\": true\n  }\n}","options":{"response":{"response":{"responseFormat":"file"}}}},"id":"88af5810-91b8-469b-a390-35e84eeb7365","name":"ElevenLabs - G√©n√©rer Voix IA","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[4464,176]},{"parameters":{"name":"voiceover_main.mp3","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"mode":"list","value":"root","cachedResultName":"/ (Root folder)"},"options":{}},"id":"b1136dd5-3796-4b64-b8b1-4a51cb16365a","name":"Google Drive - Uploader Voix","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[4704,176]},{"parameters":{"method":"POST","url":"https://api.mubert.com/v2/RecordTrack","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"method\": \"RecordTrack\",\n  \"params\": {\n    \"mode\": \"track\",\n    \"duration\": {{ $('Parser le Script Complet').first().json.totalDuration }},\n    \"tags\": \"ambient,corporate,motivational,technology\",\n    \"bitrate\": 320\n  }\n}","options":{}},"id":"c3956b91-581c-46a6-a576-f9260c157ac6","name":"Mubert - G√©n√©rer Musique","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[4944,176]},{"parameters":{"url":"={{ $json.data.result.track_url }}","options":{"response":{"response":{"responseFormat":"file"}}}},"id":"9b55972a-f09b-4cfa-885b-78c0a6075a99","name":"T√©l√©charger Musique","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[5184,176]},{"parameters":{"name":"background_music.mp3","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"mode":"list","value":"root","cachedResultName":"/ (Root folder)"},"options":{}},"id":"a620acaf-a908-492a-a416-ae0797ce56b2","name":"Google Drive - Uploader Musique","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[5424,176]},{"parameters":{"content":"## Assemblage Vid√©o Final\n\nUtilisation de ffmpeg via MCP:\n1. R√©cup√©rer tous les assets\n2. Cr√©er la timeline\n3. Synchroniser audio/vid√©o\n4. Ajouter transitions\n5. Exporter en haute qualit√©\n\nFormat: MP4, 1080p, H.264","height":240,"width":350},"id":"044d04b0-45fa-450a-b826-ccfd8e6b5f0e","name":"üé¨ √âtape 6: Assemblage Vid√©o (MCP ffmpeg)","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[5392,-112]},{"parameters":{"jsCode":"// R√©cup√©rer toutes les informations des assets depuis Google Sheets\nconst allAssets = {\n  script: $('Parser le Script Complet').first().json,\n  sequences: [], // Sera rempli depuis Google Sheets\n  voiceoverUrl: $('Google Drive - Uploader Voix').first().json.webViewLink,\n  musicUrl: $('Google Drive - Uploader Musique').first().json.webViewLink,\n  title: $('Parser les Titres').first().json.selectedTitle\n};\n\nreturn [{ json: allAssets }];"},"id":"f3ded405-8787-4280-98f7-6cb00afc68d6","name":"Rassembler Tous les Assets","type":"n8n-nodes-base.code","typeVersion":2,"position":[5664,176]},{"parameters":{"operation":"getAll","documentId":{"__rl":true,"mode":"list","value":"YOUR_SPREADSHEET_ID"}},"id":"b43b1701-1d95-488e-b08d-ac5d2b292bbe","name":"Google Sheets - Lire Assets","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[5904,176]},{"parameters":{"jsCode":"// Cr√©er un script FFmpeg complet pour assembler la vid√©o\nconst sequences = $json;\nconst assets = $('Rassembler Tous les Assets').first().json;\n\n// Template de script FFmpeg\nconst ffmpegScript = `#!/bin/bash\n# Script FFmpeg pour assemblage vid√©o YouTube\n# G√©n√©r√© automatiquement par n8n\n\n# Variables\nOUTPUT_DIR=\"/tmp/video_output\"\nFINAL_VIDEO=\"${OUTPUT_DIR}/final_video.mp4\"\nVOICEOVER=\"${assets.voiceoverUrl}\"\nMUSIC=\"${assets.musicUrl}\"\n\n# Cr√©er r√©pertoire de sortie\nmkdir -p $OUTPUT_DIR\n\n# T√©l√©charger les assets depuis Google Drive\necho \"T√©l√©chargement des assets...\"\n\n# Pour chaque s√©quence, t√©l√©charger image/vid√©o\n${sequences.map((seq, i) => `\n# S√©quence ${seq.sequenceId}\nwget -O \"${OUTPUT_DIR}/seq_${seq.sequenceId}.${seq.hasVideo ? 'mp4' : 'png'}\" \"${seq.hasVideo ? seq.videoUrl : seq.imageUrl}\"\n`).join('')}\n\n# T√©l√©charger audio\nwget -O \"${OUTPUT_DIR}/voiceover.mp3\" \"$VOICEOVER\"\nwget -O \"${OUTPUT_DIR}/music.mp3\" \"$MUSIC\"\n\necho \"Assets t√©l√©charg√©s.\"\n\n# Cr√©er liste de concat√©nation\ncat > ${OUTPUT_DIR}/concat_list.txt << 'EOF'\n${sequences.map((seq, i) => {\n  if (seq.hasVideo) {\n    return `file 'seq_${seq.sequenceId}.mp4'`;\n  } else {\n    // Convertir image en vid√©o avec dur√©e\n    return `file 'seq_${seq.sequenceId}_converted.mp4'`;\n  }\n}).join('\\n')}\nEOF\n\n# Convertir images en vid√©os statiques\necho \"Conversion des images...\"\n${sequences.filter(seq => !seq.hasVideo).map(seq => `\nffmpeg -loop 1 -i \"${OUTPUT_DIR}/seq_${seq.sequenceId}.png\" -c:v libx264 -t ${seq.duration} -pix_fmt yuv420p -vf \"scale=1920:1080:force_original_aspect_ratio=decrease,pad=1920:1080:(ow-iw)/2:(oh-ih)/2,setsar=1\" \"${OUTPUT_DIR}/seq_${seq.sequenceId}_converted.mp4\"\n`).join('')}\n\necho \"Assemblage vid√©o...\"\n# Concat√©ner toutes les s√©quences\nffmpeg -f concat -safe 0 -i ${OUTPUT_DIR}/concat_list.txt -c copy ${OUTPUT_DIR}/video_no_audio.mp4\n\n# Mixer la voix et la musique\necho \"Mixage audio...\"\nffmpeg -i ${OUTPUT_DIR}/voiceover.mp3 -i ${OUTPUT_DIR}/music.mp3 \\\\\n  -filter_complex \"[0:a]volume=1.0[a1];[1:a]volume=0.2[a2];[a1][a2]amix=inputs=2:duration=longest\" \\\\\n  ${OUTPUT_DIR}/mixed_audio.mp3\n\n# Ajouter l'audio mix√© √† la vid√©o\necho \"Assemblage final...\"\nffmpeg -i ${OUTPUT_DIR}/video_no_audio.mp4 -i ${OUTPUT_DIR}/mixed_audio.mp3 \\\\\n  -c:v copy -c:a aac -b:a 192k -shortest \\\\\n  $FINAL_VIDEO\n\necho \"Vid√©o finale cr√©√©e: $FINAL_VIDEO\"\necho \"Dur√©e: ${assets.script.totalDuration} secondes\"\necho \"Titre: ${assets.title}\"\n`;\n\nreturn [{\n  json: {\n    ffmpegScript: ffmpegScript,\n    outputPath: '/tmp/video_output/final_video.mp4',\n    scriptPath: '/tmp/video_output/assemble.sh'\n  }\n}];"},"id":"c6fb8deb-45cb-4459-a7dd-0dc7eae5e18d","name":"Cr√©er Script FFmpeg","type":"n8n-nodes-base.code","typeVersion":2,"position":[6144,176]},{"parameters":{"jsCode":"// Note: Dans un environnement r√©el, vous utiliseriez le MCP Server pour ex√©cuter ffmpeg\n// Ceci est une simulation de l'ex√©cution\n\nconst script = $json.ffmpegScript;\nconst scriptPath = $json.scriptPath;\n\n// Dans un environnement r√©el avec MCP:\n// 1. Sauvegarder le script bash\n// 2. Appeler le MCP Server ffmpeg\n// 3. Attendre la fin de l'ex√©cution\n// 4. R√©cup√©rer la vid√©o finale\n\n// Pour cette d√©mo, on simule le r√©sultat\nconst simulatedResult = {\n  success: true,\n  videoPath: '/tmp/video_output/final_video.mp4',\n  duration: $('Parser le Script Complet').first().json.totalDuration,\n  fileSize: '~500MB',\n  resolution: '1920x1080',\n  codec: 'H.264',\n  audioCodec: 'AAC',\n  message: 'Vid√©o assembl√©e avec succ√®s via MCP/ffmpeg'\n};\n\n// Instructions pour impl√©mentation r√©elle:\nconst implementationNotes = `\n=== IMPL√âMENTATION MCP/FFMPEG ===\n\n1. Installer MCP Server:\n   npm install -g @modelcontextprotocol/server-ffmpeg\n\n2. Configurer dans n8n:\n   - Utiliser le n≈ìud \"Execute Command\" ou \"HTTP Request\"\n   - Endpoint: localhost:3000/execute\n   - M√©thode: POST\n   - Body: { \"script\": \"<ffmpeg_script>\" }\n\n3. Le script FFmpeg sera ex√©cut√© automatiquement\n\n4. R√©cup√©rer le fichier vid√©o final\n\n5. Uploader vers Google Drive\n\nScript sauvegard√© dans: ${scriptPath}\n`;\n\nreturn [{\n  json: {\n    ...simulatedResult,\n    implementationNotes: implementationNotes,\n    ffmpegScript: script\n  }\n}];"},"id":"55fac97c-651f-4afd-976a-5cbd78456610","name":"MCP - Ex√©cuter FFmpeg","type":"n8n-nodes-base.code","typeVersion":2,"position":[6384,176]},{"parameters":{"content":"## Upload et Finalisation\n\n1. Uploader vid√©o vers Google Drive\n2. Cr√©er miniature personnalis√©e\n3. G√©n√©rer description optimis√©e\n4. Pr√©parer m√©tadonn√©es YouTube\n5. Enregistrer dans Google Sheets\n\nStatut: Pr√™t pour publication","height":240,"width":350,"color":4},"id":"43d0ee08-5375-4856-bf66-f5e5d44f2bff","name":"‚òÅÔ∏è √âtape 7: Upload Final","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[6352,-112]},{"parameters":{"name":"={{ $('Parser les Titres').first().json.selectedTitle + '_final.mp4' }}","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"mode":"list","value":"root","cachedResultName":"/ (Root folder)"},"options":{}},"id":"43078831-3b4f-4472-b1dd-0da2ead0c058","name":"Google Drive - Uploader Vid√©o Finale","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[6624,176]},{"parameters":{"method":"POST","url":"https://api.kie.ai/v1/images/generate","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"prompt\": \"YouTube thumbnail, eye-catching, professional, high contrast, bold text: '{{ $('Parser les Titres').first().json.selectedTitle }}', vibrant colors, 1280x720, clickbait style, modern design\",\n  \"model\": \"flux-pro\",\n  \"width\": 1280,\n  \"height\": 720,\n  \"num_outputs\": 1,\n  \"output_format\": \"jpg\",\n  \"guidance_scale\": 8\n}","options":{"response":{"response":{"responseFormat":"file"}}}},"id":"0276a6d6-39a7-45f2-bdaf-16b2d098eca3","name":"Cr√©er Miniature YouTube","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[6864,80]},{"parameters":{"name":"thumbnail.jpg","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"mode":"list","value":"root","cachedResultName":"/ (Root folder)"},"options":{}},"id":"d2a38385-0605-4f4b-a80c-6b68a9db6d4d","name":"Google Drive - Uploader Miniature","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[7104,80]},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-4\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Tu es un expert en optimisation YouTube. Tu cr√©es des descriptions captivantes, bien structur√©es, avec mots-cl√©s SEO, timestamps, et call-to-action.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Cr√©e une description YouTube compl√®te pour cette vid√©o :\\n\\nTitre: {{ $('Parser les Titres').first().json.selectedTitle }}\\n\\nContenu:\\n{{ $('Parser le Script Complet').first().json.script.outline?.map(s => `- ${s.section}`).join('\\n') }}\\n\\nDur√©e: {{ $('Parser le Script Complet').first().json.totalDuration }} secondes\\n\\nInclure:\\n- Description accrocheuse (3-4 lignes)\\n- Timestamps des sections principales\\n- 15-20 hashtags pertinents\\n- Links (r√©seaux sociaux placeholders)\\n- Call-to-action\\n- Cr√©dits\\n\\nFormat optimis√© pour YouTube.\"\n    }\n  ],\n  \"temperature\": 0.7,\n  \"max_tokens\": 1000\n}","options":{}},"id":"abda5481-41ed-4798-8806-c98357e5ee38","name":"OpenAI - G√©n√©rer Description YouTube","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[6864,272]},{"parameters":{"jsCode":"const description = $json.choices[0].message.content;\n\nreturn [{\n  json: {\n    description: description\n  }\n}];"},"id":"c1678fa2-d8d4-4b48-a790-4d6adbbe9dae","name":"Parser Description","type":"n8n-nodes-base.code","typeVersion":2,"position":[7104,272]},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"YOUR_SPREADSHEET_ID"},"sheetName":{"__rl":true,"mode":"list","value":"Final_Videos"},"columns":{"mappingMode":"defineBelow","value":{"title":"={{ $('Parser les Titres').first().json.selectedTitle }}","videoUrl":"={{ $('Google Drive - Uploader Vid√©o Finale').first().json.webViewLink }}","thumbnailUrl":"={{ $('Google Drive - Uploader Miniature').first().json.webViewLink }}","description":"={{ $('Parser Description').first().json.description }}","duration":"={{ $('Parser le Script Complet').first().json.totalDuration }}","wordCount":"={{ $('Parser le Script Complet').first().json.wordCount }}","status":"Ready for upload","createdAt":"={{ $now }}","topic":"={{ $('Configuration Initiale').first().json.videoTopic }}"}},"options":{}},"id":"df3ed2d0-e9c3-4eb0-a42f-b3fe89dea10c","name":"Google Sheets - Sauvegarder M√©tadonn√©es Finales","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[7344,176]},{"parameters":{"content":"## üéâ Vid√©o YouTube Cr√©√©e avec Succ√®s !\n\n**Assets g√©n√©r√©s:**\n‚úì Script complet optimis√©\n‚úì Images/vid√©os de s√©quences\n‚úì Voix IA narration\n‚úì Musique de fond\n‚úì Vid√©o finale assembl√©e\n‚úì Miniature professionnelle\n‚úì Description SEO\n\n**Prochaines √©tapes:**\n1. V√©rifier la vid√©o finale\n2. Uploader sur YouTube\n3. Ajouter m√©tadonn√©es\n4. Planifier publication\n\nTous les fichiers sont dans Google Drive !","height":380,"width":400,"color":5},"id":"9a8e2643-4e48-400b-bfd1-14585b009d3e","name":"‚úÖ Workflow Termin√© !","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[7312,-112]},{"parameters":{"jsCode":"// Cr√©er un r√©sum√© complet du workflow\nconst summary = {\n  success: true,\n  workflowName: 'Cr√©ation Vid√©o YouTube Longue',\n  timestamp: new Date().toISOString(),\n  \n  video: {\n    title: $('Parser les Titres').first().json.selectedTitle,\n    duration: $('Parser le Script Complet').first().json.totalDuration + ' secondes',\n    url: $('Google Drive - Uploader Vid√©o Finale').first().json.webViewLink,\n    fileId: $('Google Drive - Uploader Vid√©o Finale').first().json.id\n  },\n  \n  assets: {\n    thumbnail: $('Google Drive - Uploader Miniature').first().json.webViewLink,\n    voiceover: $('Google Drive - Uploader Voix').first().json.webViewLink,\n    music: $('Google Drive - Uploader Musique').first().json.webViewLink\n  },\n  \n  metadata: {\n    description: $('Parser Description').first().json.description.substring(0, 200) + '...',\n    topic: $('Configuration Initiale').first().json.videoTopic,\n    language: $('Configuration Initiale').first().json.language,\n    tone: $('Configuration Initiale').first().json.videoTone\n  },\n  \n  statistics: {\n    scriptWordCount: $('Parser le Script Complet').first().json.wordCount,\n    numberOfSequences: $('D√©couper Script en S√©quences').all().length,\n    titlesGenerated: 10,\n    finalResolution: '1920x1080',\n    codec: 'H.264'\n  },\n  \n  nextSteps: [\n    '1. T√©l√©charger la vid√©o finale depuis Google Drive',\n    '2. V√©rifier la qualit√© vid√©o et audio',\n    '3. Uploader sur YouTube',\n    '4. Copier le titre et la description',\n    '5. Ajouter la miniature personnalis√©e',\n    '6. Configurer les param√®tres de publication',\n    '7. Ajouter √† une playlist si n√©cessaire',\n    '8. Planifier ou publier imm√©diatement'\n  ],\n  \n  message: 'üéâ Votre vid√©o YouTube est pr√™te ! Tous les assets ont √©t√© g√©n√©r√©s et sauvegard√©s dans Google Drive et Google Sheets.'\n};\n\nreturn [{ json: summary }];"},"id":"13327d44-e2bb-4751-88bc-5521dbe0afcf","name":"R√©sum√© Final","type":"n8n-nodes-base.code","typeVersion":2,"position":[7584,176]}],"connections":{"D√©marrer la Cr√©ation Vid√©o":{"main":[[{"node":"Configuration Initiale","type":"main","index":0}]]},"Configuration Initiale":{"main":[[{"node":"Apify - Scraper YouTube","type":"main","index":0}]]},"Apify - Scraper YouTube":{"main":[[{"node":"Attendre Fin du Scraping","type":"main","index":0}]]},"Attendre Fin du Scraping":{"main":[[{"node":"R√©cup√©rer R√©sultats Apify","type":"main","index":0}]]},"R√©cup√©rer R√©sultats Apify":{"main":[[{"node":"Traiter les Transcripts","type":"main","index":0}]]},"Traiter les Transcripts":{"main":[[{"node":"Google Sheets - Sauvegarder Transcripts","type":"main","index":0}]]},"Google Sheets - Sauvegarder Transcripts":{"main":[[{"node":"Pr√©parer Examples Few-Shot","type":"main","index":0}]]},"Pr√©parer Examples Few-Shot":{"main":[[{"node":"OpenAI - G√©n√©rer 10 Titres SEO","type":"main","index":0},{"node":"OpenAI - Cr√©er Plan du Script","type":"main","index":0}]]},"OpenAI - G√©n√©rer 10 Titres SEO":{"main":[[{"node":"Parser les Titres","type":"main","index":0}]]},"Parser les Titres":{"main":[[{"node":"Recherche Web pour Enrichir","type":"main","index":0}]]},"OpenAI - Cr√©er Plan du Script":{"main":[[{"node":"Parser le Plan","type":"main","index":0}]]},"Parser le Plan":{"main":[[{"node":"Recherche Web pour Enrichir","type":"main","index":0}]]},"Recherche Web pour Enrichir":{"main":[[{"node":"OpenAI - G√©n√©rer Script Complet (Few-Shot)","type":"main","index":0}]]},"OpenAI - G√©n√©rer Script Complet (Few-Shot)":{"main":[[{"node":"Parser le Script Complet","type":"main","index":0}]]},"Parser le Script Complet":{"main":[[{"node":"Google Sheets - Sauvegarder Script","type":"main","index":0}]]},"Google Sheets - Sauvegarder Script":{"main":[[{"node":"D√©couper Script en S√©quences","type":"main","index":0}]]},"D√©couper Script en S√©quences":{"main":[[{"node":"Boucle sur les S√©quences","type":"main","index":0}]]},"Boucle sur les S√©quences":{"main":[[{"node":"Cr√©er Prompt Image pour S√©quence","type":"main","index":0}],[{"node":"Rassembler Tous les Assets","type":"main","index":0}]]},"Cr√©er Prompt Image pour S√©quence":{"main":[[{"node":"Kie.ai - G√©n√©rer Image","type":"main","index":0}]]},"Kie.ai - G√©n√©rer Image":{"main":[[{"node":"Google Drive - Uploader Image","type":"main","index":0}]]},"Google Drive - Uploader Image":{"main":[[{"node":"G√©n√©rer Vid√©o Courte?","type":"main","index":0}]]},"G√©n√©rer Vid√©o Courte?":{"main":[[{"node":"Cr√©er Prompt Vid√©o","type":"main","index":0}],[{"node":"Fusionner Assets","type":"main","index":0}]]},"Cr√©er Prompt Vid√©o":{"main":[[{"node":"Kie.ai - G√©n√©rer Vid√©o","type":"main","index":0}]]},"Kie.ai - G√©n√©rer Vid√©o":{"main":[[{"node":"Google Drive - Uploader Vid√©o","type":"main","index":0}]]},"Google Drive - Uploader Vid√©o":{"main":[[{"node":"Fusionner Assets","type":"main","index":1}]]},"Fusionner Assets":{"main":[[{"node":"Enregistrer Info Asset","type":"main","index":0}]]},"Enregistrer Info Asset":{"main":[[{"node":"Google Sheets - Sauvegarder Assets","type":"main","index":0}]]},"Google Sheets - Sauvegarder Assets":{"main":[[{"node":"Boucle sur les S√©quences","type":"main","index":0}]]},"Rassembler Tous les Assets":{"main":[[{"node":"Google Sheets - Lire Assets","type":"main","index":0},{"node":"ElevenLabs - G√©n√©rer Voix IA","type":"main","index":0}]]},"ElevenLabs - G√©n√©rer Voix IA":{"main":[[{"node":"Google Drive - Uploader Voix","type":"main","index":0}]]},"Google Drive - Uploader Voix":{"main":[[{"node":"Mubert - G√©n√©rer Musique","type":"main","index":0}]]},"Mubert - G√©n√©rer Musique":{"main":[[{"node":"T√©l√©charger Musique","type":"main","index":0}]]},"T√©l√©charger Musique":{"main":[[{"node":"Google Drive - Uploader Musique","type":"main","index":0}]]},"Google Drive - Uploader Musique":{"main":[[{"node":"Cr√©er Script FFmpeg","type":"main","index":0}]]},"Google Sheets - Lire Assets":{"main":[[{"node":"Cr√©er Script FFmpeg","type":"main","index":0}]]},"Cr√©er Script FFmpeg":{"main":[[{"node":"MCP - Ex√©cuter FFmpeg","type":"main","index":0}]]},"MCP - Ex√©cuter FFmpeg":{"main":[[{"node":"Google Drive - Uploader Vid√©o Finale","type":"main","index":0}]]},"Google Drive - Uploader Vid√©o Finale":{"main":[[{"node":"Cr√©er Miniature YouTube","type":"main","index":0},{"node":"OpenAI - G√©n√©rer Description YouTube","type":"main","index":0}]]},"Cr√©er Miniature YouTube":{"main":[[{"node":"Google Drive - Uploader Miniature","type":"main","index":0}]]},"Google Drive - Uploader Miniature":{"main":[[{"node":"Google Sheets - Sauvegarder M√©tadonn√©es Finales","type":"main","index":0}]]},"OpenAI - G√©n√©rer Description YouTube":{"main":[[{"node":"Parser Description","type":"main","index":0}]]},"Parser Description":{"main":[[{"node":"Google Sheets - Sauvegarder M√©tadonn√©es Finales","type":"main","index":0}]]},"Google Sheets - Sauvegarder M√©tadonn√©es Finales":{"main":[[{"node":"R√©sum√© Final","type":"main","index":0}]]}},"pinData":{},"meta":null}